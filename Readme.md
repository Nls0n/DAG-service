# Сервис для работы с направленным ациклическим графом (DAG)

Проект для создания и администрирования направленными ациклическими графами с интеграцией БД 
# Технологический стек
- Python 
- FastAPI
- PostgreSQL
- sqlAlchemy
- Docker
- pytest
#### Доступные Эндпоинты
`/api/graph` - post-запрос на этот адрес создает граф, при  успешном выполнении возвращает id графа

`/api/graph/{graph_id}/` - get-запрос на этот адрес возвращает граф в виде списка вершин и ребёр

`/api/graph/{graph_id}/adjacency_list` - get-запрос на этот адрес возвращает список смежности определенного графа в виде пар ключ - значение, где ключ - имя вершины графа, значение - список имен всех смежных вершин

`/api/graph/{graph_id}/reverse_adjacency_list` - get-запрос на этот адрес возвращает транспонированный список смежностей определенного графа

`/api/graph/{graph_id}/node/{node_name}` - delete-запрос на этот адрес, в случае успешного выполнения удаляет вершину из графа 

### Основные фичи
- Автоматический запуск тестов при поднятии контейнеров
- Проверка графа на соответствие DAG перед добавлением в БД
- Хранение данных о вершинах, рёбрах и графах в БД
- Автоматическое удаление графа при отсутствии вершин
- Обработка всех возможных ошибок на стороне клиента
- Покрытие API тестами при помощи pytest и TestClient
- Контейниризация с помощью Docker
- Использование depends для корректного порядка развертывания сервисов и health-check для проверки подключения БД


# Инструкция по установке
1. Клонируйте репозиторий
``` cmd
git clone https://github.com/Nls0n/DAG-service.git
```
2. В клонированном проекте настройте .env файл для работы программы

3. Откройте Docker Desktop и выполните, находясь в корне репозитория
``` cmd
docker-compose up -d --build
```
Все необходимые зависимости будут установлены.
После этого в Docker Desktop запустятся автотесты, после чего, в случае их 100% прохождения, запускается сервер через порт 8080

Повторно тесты можно запустить из docker-контейнера


